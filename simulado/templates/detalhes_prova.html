{% extends 'base.html' %}

{% block 'body' %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1>{{ concurso.nome }}</h1>
            <p class="lead text-muted">{{ concurso.instituicao }} - {{ concurso.ano }}</p>
        </div>
        <a href="{% url 'listar_provas' %}" class="btn btn-secondary">Voltar para a lista de provas</a>
    </div>

    {% for materia, questoes in questoes_por_materia.items %}
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-light">
            <h4 class="mb-0">{{ materia }}</h4>
        </div>
        <div class="card-body">
            {% for questao in questoes %}
            <div class="p-3 mb-3 border rounded">
                <h5><strong>Questão #{{ questao.id }}</strong> - {{ questao.assunto.nome }}</h5>
                <hr>

                <h6 class="card-subtitle mt-3 mb-2 text-muted">Enunciado:</h6>
                <div class="card-text mb-3">
                    {{ questao.enunciado|safe }}
                </div>

                <h6 class="card-subtitle mb-2 text-muted">Alternativas:</h6>
                <ul class="list-group">
                    <li class="list-group-item {% if questao.resposta_correta == 'A' %}list-group-item-success{% endif %}">
                        <strong>A)</strong> {{ questao.alternativa_a|safe }}
                    </li>
                    <li class="list-group-item {% if questao.resposta_correta == 'B' %}list-group-item-success{% endif %}">
                        <strong>B)</strong> {{ questao.alternativa_b|safe }}
                    </li>
                    <li class="list-group-item {% if questao.resposta_correta == 'C' %}list-group-item-success{% endif %}">
                        <strong>C)</strong> {{ questao.alternativa_c|safe }}
                    </li>
                    <li class="list-group-item {% if questao.resposta_correta == 'D' %}list-group-item-success{% endif %}">
                        <strong>D)</strong> {{ questao.alternativa_d|safe }}
                    </li>
                    <li class="list-group-item {% if questao.resposta_correta == 'E' %}list-group-item-success{% endif %}">
                        <strong>E)</strong> {{ questao.alternativa_e|safe }}
                    </li>
                </ul>

                {% if questao.comentario_resposta %}
                <div class="mt-3">
                    <h6 class="card-subtitle mb-2 text-muted">Comentário da Resposta:</h6>
                    <div class="card-text">
                        {{ questao.comentario_resposta|safe }}
                    </div>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
    {% empty %}
    <div class="alert alert-info">
        Ainda não há questões cadastradas para esta prova.
    </div>
    {% endfor %}
</div>
{% endblock %}